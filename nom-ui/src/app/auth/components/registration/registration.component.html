<div class="registration">
  <mat-card class="registration__card">
    <mat-card-header class="registration__header">
      <mat-card-title class="registration__title"
        >Create Your Account</mat-card-title
      >
      <mat-card-subtitle class="registration__subtitle"
        >Join us and get started!</mat-card-subtitle
      >
    </mat-card-header>
    <mat-progress-bar
      *ngIf="isLoading"
      mode="indeterminate"
      color="primary"
      class="registration__progress-bar"
    ></mat-progress-bar>
    <mat-card-content class="registration__content">
      <form
        [formGroup]="registrationForm"
        (ngSubmit)="onSubmit()"
        class="registration__form"
      >
        <mat-form-field appearance="outline" class="registration__form-field">
          <mat-label>Email Address</mat-label>
          <input
            matInput
            type="email"
            formControlName="email"
            required
            class="registration__input"
          />
          <mat-icon matSuffix class="registration__icon">email</mat-icon>
          <mat-error
            *ngIf="registrationForm.get('email')?.hasError('required')"
            class="registration__error"
          >
            Email is required.
          </mat-error>
          <mat-error
            *ngIf="registrationForm.get('email')?.hasError('email')"
            class="registration__error"
          >
            Please enter a valid email address.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="registration__form-field">
          <mat-label>Password</mat-label>
          <input
            matInput
            type="password"
            formControlName="password"
            required
            class="registration__input"
          />
          <mat-icon matSuffix class="registration__icon">lock</mat-icon>
          <mat-error
            *ngIf="registrationForm.get('password')?.hasError('required')"
            class="registration__error"
          >
            Password is required.
          </mat-error>
          <mat-error
            *ngIf="registrationForm.get('password')?.hasError('minlength')"
            class="registration__error"
          >
            Password must be at least 8 characters.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="registration__form-field">
          <mat-label>Confirm Password</mat-label>
          <input
            matInput
            type="password"
            formControlName="confirmPassword"
            required
            class="registration__input"
          />
          <mat-icon matSuffix class="registration__icon">lock_open</mat-icon>
          <mat-error
            *ngIf="
              registrationForm.get('confirmPassword')?.hasError('required')
            "
            class="registration__error"
          >
            Confirm Password is required.
          </mat-error>
          <mat-error
            *ngIf="
              registrationForm.hasError('mismatch') &&
              registrationForm.get('confirmPassword')?.dirty
            "
            class="registration__error"
          >
            Passwords do not match.
          </mat-error>
        </mat-form-field>

        <mat-checkbox
          formControlName="acceptTerms"
          required
          class="registration__terms-checkbox"
        >
          I agree to the
          <a
            routerLink="/terms"
            target="_blank"
            class="registration__terms-link"
            >Terms of Service</a
          >
        </mat-checkbox>
        <mat-error
          *ngIf="
            registrationForm.get('acceptTerms')?.hasError('requiredTrue') &&
            registrationForm.get('acceptTerms')?.touched
          "
          class="registration__error"
        >
          You must accept the terms.
        </mat-error>

        <button
          mat-raised-button
          color="primary"
          type="submit"
          [disabled]="registrationForm.invalid || isLoading"
          class="registration__button"
        >
          <span *ngIf="!isLoading">Register Account</span>
          <mat-spinner
            *ngIf="isLoading"
            [diameter]="20"
            class="registration__spinner"
          ></mat-spinner>
        </button>
      </form>
    </mat-card-content>
    <mat-card-actions align="end" class="registration__actions">
      <p class="registration__login-prompt">
        Already have an account?
        <a routerLink="/login" class="registration__login-link">Login Here</a>
      </p>
    </mat-card-actions>
  </mat-card>
</div>
